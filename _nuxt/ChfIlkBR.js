const p=t=>{const i={articleid:t.articleid,authors:[{name:t.createBy,link:t.createBy}],category:t.category,createBy:t.createBy,createTime:t.createTime,editlink:"/edit/"+t.articleid,date:t.createTime,description:t.desc,id:t.id,isPublic:t.isPublic===1,likeCount:t.likeCountVo||0,permalink:"/article/"+t.articleid,reviewInfo:t.reviewInfo,status:t.status,space:t.space,tags:t.tags?t.tags.split(","):[],title:t.title,updateTime:t.updateTime,_type:"markdown"};if(t.highlight)for(let n in t.highlight){let e="";t.highlight.hasOwnProperty(n)&&(e+=t.highlight[n].join(" "));const r='<span style="color:red">',o=e.indexOf(r),a="</span>",s=e.lastIndexOf(a),l=100+r.length;if(o>=0){const c=o-10>0?o-10:0;let h=o+l>e.length?e.length-1:o+l;s>0&&(h=s+a.length>e.length?e.length-1:s+a.length);const u=e.substring(c,h);n==="content"?i.highlightHtml=u:n==="title"&&(i.highlightTitle=e)}}return i},g=t=>(console.log(t),t==="localhost"||t==="127.0.0.1"),f=(t,i)=>({title:t.title,description:t.description,permalink:t.permalink,date:t.date?t.date:new Date,createTime:t.date?t.date:new Date,id:t._id,articleid:t._id,author:t.author,_path:t._path,authors:t.authors?t.authors:t.author?[t.author]:[]}),m=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),y=(t,i)=>t?new Date(t).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",k=t=>{let i=t.split(`
`),n=0,e={},r=["title","author","categories","category","tags","tag","date","permalink","desc"],o=0;for(var a=0;a<i.length&&!(i[a].trim()==="---"&&(n++,o++,n===2));a++)if(i[a].includes(":")){let s=i[a].split(/:(.*)/s),l=s[0].trim(),c=s[1].trim();l==="author"?e[l]=d(c):r.indexOf(l)>=0&&(e[l]=c)}if(!e.desc){let s="",l=0;for(var a=o;a<i.length;a++)if(l>0&&(s+=i[a]),i[a].trim().startsWith("#")){if(l>0)break;l=a+1}e.desc=s}return e},d=t=>{let i=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,n={};for(let e of i.split(","))if(e.includes(":")){let r=e.split(":");n[r[0].trim()]=r[1].trim()}return n};export{y as a,f as b,p as c,g as i,m,k as s};
