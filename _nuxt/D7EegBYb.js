import{h as C}from"./DvDH6DOc.js";import{C as F,x as O,Q as $,R as n}from"./ub41OU9W.js";import{u as E}from"./CDuJgP8s.js";function A(a,r,u){const[t={},c]=typeof r=="string"?[{},r]:[r,u],e=F(()=>n(a)),s=t.key||C([c,typeof e.value=="string"?e.value:"",...L(t)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!a)throw new Error("[nuxt] [useFetch] request is missing.");const i=s===c?"$f"+s:s;if(!t.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:y,default:d,transform:b,pick:g,watch:f,immediate:w,getCachedData:v,deep:_,dedupe:k,...D}=t,h=O({...$,...D,cache:typeof t.cache=="boolean"?void 0:t.cache}),x={server:l,lazy:y,default:d,transform:b,pick:g,immediate:w,getCachedData:v,deep:_,dedupe:k,watch:f===!1?[]:[h,e,...f||[]]};let o;return E(i,()=>{var m;(m=o==null?void 0:o.abort)==null||m.call(o),o=typeof AbortController<"u"?new AbortController:{};const p=n(t.timeout);return p&&setTimeout(()=>o.abort(),p),(t.$fetch||globalThis.$fetch)(e.value,{signal:o.signal,...h})},x)}function L(a){var u;const r=[((u=n(a.method))==null?void 0:u.toUpperCase())||"GET",n(a.baseURL)];for(const t of[a.params||a.query]){const c=n(t);if(!c)continue;const e={};for(const[s,i]of Object.entries(c))e[n(s)]=n(i);r.push(e)}return r}export{A as u};
