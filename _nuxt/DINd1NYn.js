import{_ as me}from"./CljSnIbu.js";import{_ as ge}from"./6AadfNYY.js";import{u as X,_ as Y,g as Q}from"./DVxX04re.js";import{_ as Z,m as W,g as F,h as _,i as M,j as w,k as ye,l as be,o as s,c as g,a as v,a2 as ve,a6 as he,n as $,y as u,r as V,d as x,t as z,z as B,x as te,b as O,F as E,A as G,K as ke,a7 as ae,B as N,q as L,D as Se,E as H,G as oe,w as R,f as Ce,H as we}from"./DtMEWqXq.js";import{u as Be,a as $e}from"./6UL0usPL.js";import{_ as J,b as Ve}from"./87oCajp8.js";import{_ as ie}from"./DMwAPVbN.js";import{u as Ae}from"./6bm_RRcn.js";import{a as Oe}from"./BeDeazUK.js";import{b as Fe,c as ne,d as je,a as Pe}from"./CvIXsaFB.js";import{u as ze}from"./Dee-9hzw.js";import{M as le}from"./DshPJGOp.js";import{q as Ne}from"./A4n2IHUJ.js";import"./E7OSl0e4.js";import"./CAZilBRX.js";import"./WBjl7sqm.js";import"./gJIN9SAJ.js";import"./Dp-LMrGz.js";const Ie={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}},Ue={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent dark:indeterminate:bg-current dark:indeterminate:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-checkbox",rounded:"rounded",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},Me={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},re=W(F.ui.strategy,F.ui.checkbox,Ue),De=_({inheritAttrs:!1,props:{id:{type:String,default:()=>null},value:{type:[String,Number,Boolean,Object],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:void 0},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>re.default.color,validator(e){return F.ui.colors.includes(e)}},inputClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const{ui:i,attrs:h}=X("checkbox",M(e,"ui"),re,M(e,"class")),{emitFormChange:c,color:p,name:r,inputId:m}=Be(e),S=m.value??$e("$YWrWuPJ69t"),y=w({get(){return e.modelValue},set(o){t("update:modelValue",o)}}),a=o=>{t("change",o.target.checked),c()},f=w(()=>ye(be(i.value.base,i.value.form,i.value.rounded,i.value.background,i.value.border,p.value&&i.value.ring.replaceAll("{color}",p.value),p.value&&i.value.color.replaceAll("{color}",p.value)),e.inputClass));return{ui:i,attrs:h,toggle:y,inputId:S,name:r,inputClass:f,onChange:a}}}),Te=["data-n-ids"],qe=["id","name","required","value","disabled","indeterminate"],Le=["for"];function Re(e,t,i,h,c,p){return s(),g("div",{class:u(e.ui.wrapper),"data-n-ids":e.attrs["data-n-ids"]},[v("div",{class:u(e.ui.container)},[ve(v("input",$({id:e.inputId,"onUpdate:modelValue":t[0]||(t[0]=r=>e.toggle=r),name:e.name,required:e.required,value:e.value,disabled:e.disabled,indeterminate:e.indeterminate,type:"checkbox",class:e.inputClass},e.attrs,{onChange:t[1]||(t[1]=(...r)=>e.onChange&&e.onChange(...r))}),null,16,qe),[[he,e.toggle]])],2),e.label||e.$slots.label?(s(),g("div",{key:0,class:u(e.ui.inner)},[v("label",{for:e.inputId,class:u(e.ui.label)},[V(e.$slots,"label",{},()=>[x(z(e.label),1)]),e.required?(s(),g("span",{key:0,class:u(e.ui.required)},"*",2)):B("",!0)],10,Le),e.help?(s(),g("p",{key:0,class:u(e.ui.help)},z(e.help),3)):B("",!0)],2)):B("",!0)],10,Te)}const ue=Z(De,[["render",Re]]),I=W(F.ui.strategy,F.ui.table,Ie);function Ee(e,t){return e===t}function se(e,t,i){return e===t?0:i==="asc"?e<t?-1:1:e>t?-1:1}const Ge=_({components:{UIcon:Y,UButton:J,UProgress:ie,UCheckbox:ue},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>Ee},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>I.default.sortButton},sortAscIcon:{type:String,default:()=>I.default.sortAscIcon},sortDescIcon:{type:String,default:()=>I.default.sortDescIcon},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>I.default.loadingState},emptyState:{type:Object,default:()=>I.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>I.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","update:sort"],setup(e,{emit:t,attrs:i}){const{ui:h,attrs:c}=X("table",M(e,"ui"),I,M(e,"class")),p=w(()=>e.columns??Object.keys(e.rows[0]??{}).map(n=>({key:n,label:Ae(n),sortable:!1,class:void 0,sort:se}))),r=Oe(e,"sort",t,{passive:!0,defaultValue:te({},e.sort,{column:null,direction:"asc"})}),m={column:r.value.column,direction:null},S=w(()=>{var b;if(!((b=r.value)!=null&&b.column)||e.sortMode==="manual")return e.rows;const{column:n,direction:l}=r.value;return e.rows.slice().sort((A,de)=>{var ee;const ce=Q(A,n),fe=Q(de,n);return(((ee=p.value.find(pe=>pe.key===n))==null?void 0:ee.sort)??se)(ce,fe,l)})}),y=w({get(){return e.modelValue},set(n){t("update:modelValue",n)}}),a=w(()=>y.value&&y.value.length>0&&y.value.length<e.rows.length),f=w(()=>e.emptyState===null?null:{...h.value.default.emptyState,...e.emptyState}),o=w(()=>e.loadingState===null?null:{...h.value.default.loadingState,...e.loadingState});function j(n,l){if(typeof e.by=="string"){const b=e.by;return(n==null?void 0:n[b])===(l==null?void 0:l[b])}return e.by(n,l)}function d(n){return e.modelValue?y.value.some(l=>j(ae(l),ae(n))):!1}function C(n){if(r.value.column===n.key){const l=!n.direction||n.direction==="asc"?"desc":"asc";r.value.direction===l?r.value=te({},m,{column:null,direction:"asc"}):r.value={column:r.value.column,direction:r.value.direction==="asc"?"desc":"asc"}}else r.value={column:n.key,direction:n.direction||"asc"}}function U(n){i.onSelect&&i.onSelect(n)}function k(){e.rows.forEach(n=>{d(n)||y.value.push(n)})}function T(n){n?k():y.value=[]}function D(n,l,b=""){return Q(n,l,b)}function q(n){if(n.sortable){if(r.value.column!==n.key)return"none";if(r.value.direction==="asc")return"ascending";if(r.value.direction==="desc")return"descending"}}return{ui:h,attrs:c,sort:r,columns:p,rows:S,selected:y,indeterminate:a,emptyState:f,loadingState:o,isSelected:d,onSort:C,onSelect:U,onChange:T,getRowData:D,getAriaSort:q}}}),We=["aria-sort"],Je={key:1},Qe={key:0},He={key:0},Ke=["colspan"],Xe={key:1},Ye=["colspan"],Ze=["onClick"];function _e(e,t,i,h,c,p){const r=ue,m=J,S=ie,y=Y;return s(),g("div",$({class:e.ui.wrapper},e.attrs),[v("table",{class:u([e.ui.base,e.ui.divide])},[e.$slots.caption||e.caption?V(e.$slots,"caption",{key:0},()=>[v("caption",{class:u(e.ui.caption)},z(e.caption),3)]):B("",!0),v("thead",{class:u(e.ui.thead)},[v("tr",{class:u(e.ui.tr.base)},[e.modelValue?(s(),g("th",{key:0,scope:"col",class:u(e.ui.checkbox.padding)},[O(r,$({"model-value":e.indeterminate||e.selected.length===e.rows.length,indeterminate:e.indeterminate},e.ui.default.checkbox,{"aria-label":"Select all",onChange:e.onChange}),null,16,["model-value","indeterminate","onChange"])],2)):B("",!0),(s(!0),g(E,null,G(e.columns,(a,f)=>(s(),g("th",{key:f,scope:"col",class:u([e.ui.th.base,e.ui.th.padding,e.ui.th.color,e.ui.th.font,e.ui.th.size,a.class]),"aria-sort":e.getAriaSort(a)},[V(e.$slots,`${a.key}-header`,{column:a,sort:e.sort,onSort:e.onSort},()=>[a.sortable?(s(),N(m,$({key:0,ref_for:!0},{...e.ui.default.sortButton||{},...e.sortButton},{icon:!e.sort.column||e.sort.column!==a.key?e.sortButton.icon||e.ui.default.sortButton.icon:e.sort.direction==="asc"?e.sortAscIcon:e.sortDescIcon,label:a[e.columnAttribute],onClick:o=>e.onSort(a)}),null,16,["icon","label","onClick"])):(s(),g("span",Je,z(a[e.columnAttribute]),1))])],10,We))),128))],2),e.loading&&e.progress?(s(),g("tr",Qe,[v("td",{colspan:0,class:u(e.ui.progress.wrapper)},[O(S,$({...e.ui.default.progress||{},...e.progress},{size:"2xs"}),null,16)],2)])):B("",!0)],2),v("tbody",{class:u(e.ui.tbody)},[e.loadingState&&e.loading&&!e.rows.length?(s(),g("tr",He,[v("td",{colspan:e.columns.length+(e.modelValue?1:0)},[V(e.$slots,"loading-state",{},()=>[v("div",{class:u(e.ui.loadingState.wrapper)},[e.loadingState.icon?(s(),N(y,{key:0,name:e.loadingState.icon,class:u(e.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):B("",!0),v("p",{class:u(e.ui.loadingState.label)},z(e.loadingState.label),3)],2)])],8,Ke)])):e.emptyState&&!e.rows.length?(s(),g("tr",Xe,[v("td",{colspan:e.columns.length+(e.modelValue?1:0)},[V(e.$slots,"empty-state",{},()=>[v("div",{class:u(e.ui.emptyState.wrapper)},[e.emptyState.icon?(s(),N(y,{key:0,name:e.emptyState.icon,class:u(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):B("",!0),v("p",{class:u(e.ui.emptyState.label)},z(e.emptyState.label),3)],2)])],8,Ye)])):(s(!0),g(E,{key:2},G(e.rows,(a,f)=>(s(),g("tr",{key:f,class:u([e.ui.tr.base,e.isSelected(a)&&e.ui.tr.selected,e.$attrs.onSelect&&e.ui.tr.active,a==null?void 0:a.class]),onClick:()=>e.onSelect(a)},[e.modelValue?(s(),g("td",{key:0,class:u(e.ui.checkbox.padding)},[O(r,$({modelValue:e.selected,"onUpdate:modelValue":t[0]||(t[0]=o=>e.selected=o),value:a,ref_for:!0},e.ui.default.checkbox,{"aria-label":"Select row",onClick:t[1]||(t[1]=ke(()=>{},["stop"]))}),null,16,["modelValue","value"])],2)):B("",!0),(s(!0),g(E,null,G(e.columns,(o,j)=>{var d;return s(),g("td",{key:j,class:u([e.ui.td.base,e.ui.td.padding,e.ui.td.color,e.ui.td.font,e.ui.td.size,(d=a[o.key])==null?void 0:d.class])},[V(e.$slots,`${o.key}-data`,{column:o,row:a,index:f,getRowData:C=>e.getRowData(a,o.key,C)},()=>[x(z(e.getRowData(a,o.key)),1)])],2)}),128))],10,Ze))),128))],2)],2)],16)}const xe=Z(Ge,[["render",_e]]),P=W(F.ui.strategy,F.ui.pagination,Me),et=W(F.ui.strategy,F.ui.button,Ve),tt=_({components:{UButton:J},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>P.default.size,validator(e){return Object.keys(et.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>P.default.activeButton},inactiveButton:{type:Object,default:()=>P.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>P.default.firstButton},lastButton:{type:Object,default:()=>P.default.lastButton},prevButton:{type:Object,default:()=>P.default.prevButton},nextButton:{type:Object,default:()=>P.default.nextButton},divider:{type:String,default:"…"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:t}){const{ui:i,attrs:h}=X("pagination",M(e,"ui"),P,M(e,"class")),c=w({get(){return e.modelValue},set(d){t("update:modelValue",d)}}),p=w(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(d,C)=>C+1)),r=w(()=>{const d=p.value.length,C=c.value,U=Math.max(e.max,5),k=Math.floor((Math.min(U,d)-5)/2),T=C-k,D=C+k,q=T-1>1,n=D+1<d,l=[];if(d<=U){for(let b=1;b<=d;b++)l.push(b);return l}if(l.push(1),q&&l.push(e.divider),!n){const b=C+k+2-d;for(let A=C-k-b;A<=C-k-1;A++)l.push(A)}for(let b=Math.max(2,T);b<=Math.min(d,D);b++)l.push(b);if(!q){const b=1-(C-k-2);for(let A=C+k+1;A<=C+k+b;A++)l.push(A)}return n&&l.push(e.divider),D<d&&l.push(d),l.length>=3&&l[1]===e.divider&&l[2]===3&&(l[1]=2),l.length>=3&&l[l.length-2]===e.divider&&l[l.length-1]===l.length&&(l[l.length-2]=l.length-1),l}),m=w(()=>c.value>1),S=w(()=>c.value<p.value.length);function y(){m.value&&(c.value=1)}function a(){S.value&&(c.value=p.value.length)}function f(d){typeof d!="string"&&(c.value=d)}function o(){m.value&&c.value--}function j(){S.value&&c.value++}return{ui:i,attrs:h,currentPage:c,pages:p,displayedPages:r,canGoLastOrNext:S,canGoFirstOrPrev:m,onClickPrev:o,onClickNext:j,onClickPage:f,onClickFirst:y,onClickLast:a}}});function at(e,t,i,h,c,p){const r=J;return s(),g("div",$({class:e.ui.wrapper},e.attrs),[V(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(s(),N(r,$({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):B("",!0)]),V(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(s(),N(r,$({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):B("",!0)]),(s(!0),g(E,null,G(e.displayedPages,(m,S)=>{var y;return s(),N(r,$({key:`${m}-${S}`,to:typeof m=="number"?(y=e.to)==null?void 0:y.call(e,m):null,size:e.size,disabled:e.disabled,label:`${m}`,ref_for:!0},m===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof m=="string","z-[1]":m===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(m)}),null,16,["to","size","disabled","label","class","onClick"])}),128)),V(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(s(),N(r,$({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):B("",!0)]),V(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(s(),N(r,$({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):B("",!0)])],16)}const ot=Z(tt,[["render",at]]),nt={class:"container"},lt={class:"article-meta"},rt=v("span",{class:"article-edit"},"Edit",-1),st={class:"flex justify-end px-3 py-3.5 border-t border-gray-200 dark:border-gray-700"},K=9,At={__name:"index",async setup(e){let t,i;const h=L([]),c=Fe(Se().public.mindpress),p=Pe;ze();const m=L([...[{key:"title",label:"Title"},{key:"createTimeF",label:"Create Time"},{key:"updateTimeF",label:"Update Time"},{key:"actions",label:"Actions"}]]),S=L(1),y=w(()=>h.value.slice((S.value-1)*K,S.value*K));if(console.log("mode===>"+c.mode),c.mode===le.SSG){console.log("static mode");const{data:a}=([t,i]=H(()=>we("home",()=>Ne().find())),t=await t,i(),t),f=a.value.map(o=>ne(o));h.value=f.map(o=>(o.updateTimeF=p(o.updateTime),o.createTimeF=p(o.createTime),o)),h.value=f}else if(c.mode===le.FCM)try{const{data:a}=([t,i]=H(()=>oe("/api/md/query","$bVgVCtepJP")),t=await t,i(),t),f=a.value.map(o=>ne(o));h.value=f.map(o=>(o.updateTimeF=p(o.updateTime),o.createTimeF=p(o.createTime),o))}catch(a){console.warn(a)}else{console.log("server mode");const{data:a}=([t,i]=H(()=>oe(c.metaUrl,"$VQM0Z5geNE")),t=await t,i(),t);if(a.value.totalElements>0){const f=L([]);f.value=a.value.content.map(o=>je(o)),h.value=f.value}}return(a,f)=>{const o=me,j=ge,d=Y,C=xe,U=ot;return s(),g("div",null,[O(o),v("main",nt,[O(C,{columns:m.value,rows:Ce(y)},{"title-data":R(({row:k})=>[O(j,{to:k.permalink},{default:R(()=>[x(z(k.title),1)]),_:2},1032,["to"])]),"actions-data":R(({row:k})=>[v("span",lt,[O(j,{to:k.editlink},{default:R(()=>[O(d,{name:"i-heroicons-pencil-square"}),rt]),_:2},1032,["to"])])]),_:1},8,["columns","rows"]),v("div",st,[O(U,{modelValue:S.value,"onUpdate:modelValue":f[0]||(f[0]=k=>S.value=k),"page-count":K,total:h.value.length},null,8,["modelValue","total"])])])])}}};export{At as default};
