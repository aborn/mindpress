import{h as O}from"./DvDH6DOc.js";import{A as C,s as F,P as L,Q as u}from"./Dr1MNG9M.js";import{u as A}from"./D2-u3BGV.js";const x=t=>({articleid:t.articleid,authors:[{name:t.createBy,link:t.createBy}],category:t.category,createBy:t.createBy,createTime:t.createTime,editlink:"/edit/"+t.articleid,date:t.createTime,description:t.desc,id:t.id,isPublic:t.isPublic===1,likeCount:t.likeCountVo||0,permalink:"/article/"+t.articleid,reviewInfo:t.reviewInfo,status:t.status,space:t.space,tags:t.tags?t.tags.split(","):[],title:t.title,updateTime:t.updateTime,_type:"markdown"}),R=t=>({title:t.title,description:t.description,permalink:t.permalink?t.permalink:t._path,date:t.date?t.date:new Date,createTime:t.date?t.date:new Date,id:t._id,articleid:t._id}),W=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),I=(t,i)=>t?new Date(t).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",K=t=>{let i=t.split(`
`),s=0,a={},r=["title","author","categories","category","tags","tag","date","permalink","desc"],n=0;for(var e=0;e<i.length&&!(i[e].trim()==="---"&&(s++,n++,s===2));e++)if(i[e].includes(":")){let c=i[e].split(/:(.*)/s),o=c[0].trim(),f=c[1].trim();o==="author"?a[o]=$(f):r.indexOf(o)>=0&&(a[o]=f)}if(!a.desc){let c="",o=0;for(var e=n;e<i.length;e++)if(o>0&&(c+=i[e]),i[e].trim().startsWith("#")){if(o>0)break;o=e+1}a.desc=c}return a},$=t=>{let i=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,s={};for(let a of i.split(","))if(a.includes(":")){let r=a.split(":");s[r[0].trim()]=r[1].trim()}return s};function S(t,i,s){const[a={},r]=typeof i=="string"?[{},i]:[i,s],n=C(()=>u(t)),e=a.key||O([r,typeof n.value=="string"?n.value:"",...j(a)]);if(!e||typeof e!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+e);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const c=e===r?"$f"+e:e;if(!a.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:o,lazy:f,default:y,transform:g,pick:b,watch:m,immediate:k,getCachedData:w,deep:T,dedupe:U,...D}=a,p=F({...L,...D,cache:typeof a.cache=="boolean"?void 0:a.cache}),_={server:o,lazy:f,default:y,transform:g,pick:b,immediate:k,getCachedData:w,deep:T,dedupe:U,watch:m===!1?[]:[p,n,...m||[]]};let l;return A(c,()=>{var h;(h=l==null?void 0:l.abort)==null||h.call(l),l=typeof AbortController<"u"?new AbortController:{};const d=u(a.timeout);return d&&setTimeout(()=>l.abort(),d),(a.$fetch||globalThis.$fetch)(n.value,{signal:l.signal,...p})},_)}function j(t){var s;const i=[((s=u(t.method))==null?void 0:s.toUpperCase())||"GET",u(t.baseURL)];for(const a of[t.params||t.query]){const r=u(a);if(!r)continue;const n={};for(const[e,c]of Object.entries(r))n[u(e)]=u(c);i.push(n)}return i}export{I as a,x as b,R as c,W as m,K as s,S as u};
