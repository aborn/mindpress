import{_ as V}from"./B_W5pjYN.js";import{_ as w}from"./4djFvJfh.js";import{b as R,i as q,c as f,d as D}from"./DIZLPcGa.js";import{r as v,g as M,h as l,c as d,b as g,a as h,F as k,i as x,o as p}from"./DRWRBcAh.js";import{u as B}from"./OZF6vmZH.js";import{M as C}from"./g2xh0qhU.js";import{u as _}from"./DPh3fVZ9.js";import{u as L}from"./DxjB5q2e.js";import{q as P}from"./B5xskMXj.js";import"./CMczETyz.js";import"./DvDH6DOc.js";import"./DR2UFR3X.js";const S={class:"container"},A={class:"articles"},j={__name:"index",async setup(E){let o,a;const c=v([]),m=R(M().public.minpress),i=B(),y=i.protocol+"//"+i.host;console.log(m),console.log(y);let u=q(i.hostname);if(console.log("isDevMode:"+u),m.mode===C.static){const s="/api/md/status";console.log(s);let n="ssg";try{const{data:e}=([o,a]=l(()=>_(s,"$PslAyef5YX")),o=await o,a(),o),t=e.value;t.mode&&(n=t.mode),console.log(t.mode)}catch(e){console.warn(e)}if(n==="fcm"&&!u)try{const{data:e}=([o,a]=l(()=>_("/api/md/query","$6PO73qLRkI")),o=await o,a(),o),t=e.value.map(r=>f(r,u));c.value=t,console.log("***************"),console.log(t)}catch(e){console.warn(e)}else{console.log("static mode");const{data:e}=([o,a]=l(()=>L("home",()=>P().sort({_id:1}).find())),o=await o,a(),o);console.log("--------dataVVVVVVV-----"),console.log(e.value);const t=e.value.map(r=>f(r));c.value=t}}else{console.log("server mode");const{data:s}=([o,a]=l(()=>_(m.metaUrl,"$nn2AXZkwPl")),o=await o,a(),o);if(s.value.totalElements>0){const n=v([]);n.value=s.value.content.map(e=>D(e)),c.value=n.value}}return(s,n)=>{const e=V,t=w;return p(),d("div",null,[g(e),h("main",S,[h("div",A,[(p(!0),d(k,null,x(c.value,r=>(p(),d("div",{class:"article",key:r.id},[g(t,{item:r},null,8,["item"])]))),128))])])])}}};export{j as default};
