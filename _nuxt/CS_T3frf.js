function p(t){const i="/article/";return t.startsWith(i)?"/md/"+t.substring(i.length):t}function f(t){return t?t.trim().length===0:!0}function d(t){return t?Array.isArray(t)?t:[t]:[]}function m(t){return typeof t=="string"||t instanceof String}function y(t){return["localhost","127.0.0.1","","::1","[::1]"].includes(t)||t.startsWith("192.168.")||t.startsWith("10.")||t.endsWith(".local")}const k=t=>{const i={articleid:t.articleid,authors:[{name:t.createBy,link:t.createBy}],category:t.category,createBy:t.createBy,createTime:t.createTime,editlink:"/edit/"+t.articleid,date:t.createTime,description:t.desc,id:t.id,isPublic:t.isPublic===1,likeCount:t.likeCountVo||0,permalink:"/article/"+t.articleid,reviewInfo:t.reviewInfo,status:t.status,space:t.space,tags:t.tags?t.tags.split(","):[],tag:t.tag,title:t.title,updateTime:t.updateTime,_type:"markdown"};if(t.highlight)for(let a in t.highlight){let e="";t.highlight.hasOwnProperty(a)&&(e+=t.highlight[a].join(" "));const s='<span style="color:red">',l=e.indexOf(s),n="</span>",o=e.lastIndexOf(n),r=100+s.length;if(l>=0){const c=l-10>=0?l-10:0;let h=l+r>e.length?e.length-1:l+r;o>0&&(h=o+n.length>e.length?e.length-1:o+n.length);const u=e.substring(c,h);a==="content"?i.highlightHtml=u:a==="title"&&(i.highlightTitle=e)}}return i},T=t=>({title:t.title,description:t.description,permalinkOrigin:t.permalink,permalink:t.permalink?t.permalink:t._id?"/article?id="+t._id:t._path,permdlink:t.permalink?p(t.permalink):t._id?"/md?id="+t._id:t._path,date:t.date?t.date:t.createTime?t.createTime:new Date,createTime:t.createTime?t.createTime:new Date,updateTime:t.updateTime?t.updateTime:t.date?t.date:new Date,id:t._id,articleid:t._id,author:t.author,_path:t._path,_id:t._id,editlink:"/edit/"+t._id,authors:t.authors?t.authors:t.author?[t.author]:[],category:t.category,tag:t.tag,highlightHtml:t.highlightHtml,highlightTitle:t.highlightTitle,mpid:t.mpid,mpstatus:t.mpstatus}),b=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),_=(t,i="en")=>t?new Date(t).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",w=t=>{const i=[];let a=t.authors;if(!a&&t.author&&(a=[t.author]),a){const e=a.length;a.forEach((s,l)=>{i.length<5&&(i.push(s.name),l!==e-1&&l!==2&&i.push("|"))})}return i.join(" ")},U=t=>{let i=t.split(`
`),a=0,e={},s=["title","author","categories","category","tags","tag","date","permalink","desc"],l=0;for(var n=0;n<i.length&&!(i[n].trim()==="---"&&(a++,l++,a===2));n++)if(i[n].includes(":")){let o=i[n].split(/:(.*)/s),r=o[0].trim(),c=o[1].trim();r==="author"?e[r]=g(c):s.indexOf(r)>=0&&(e[r]=c)}if(!e.desc){let o="",r=0;for(var n=l;n<i.length;n++)if(r>0&&(o+=i[n]),i[n].trim().startsWith("#")){if(r>0)break;r=n+1}e.desc=o}return e},g=t=>{let i=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,a={};for(let e of i.split(","))if(e.includes(":")){let s=e.split(":");a[s[0].trim()]=s[1].trim()}return a};export{_ as a,b,T as c,k as d,y as e,d as f,m as g,f as i,w as m,p,U as s};
