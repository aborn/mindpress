const m=t=>{const i={articleid:t.articleid,authors:[{name:t.createBy,link:t.createBy}],category:t.category,createBy:t.createBy,createTime:t.createTime,editlink:"/edit/"+t.articleid,date:t.createTime,description:t.desc,id:t.id,isPublic:t.isPublic===1,likeCount:t.likeCountVo||0,permalink:"/article/"+t.articleid,reviewInfo:t.reviewInfo,status:t.status,space:t.space,tags:t.tags?t.tags.split(","):[],title:t.title,updateTime:t.updateTime,_type:"markdown"};if(t.highlight)for(let n in t.highlight){let e="";t.highlight.hasOwnProperty(n)&&(e+=t.highlight[n].join(" "));const r='<span style="color:red">',c=e.indexOf(r),a="</span>",s=e.lastIndexOf(a),l=100+r.length;if(c>=0){const o=c-10>0?c-10:0;let h=c+l>e.length?e.length-1:c+l;s>0&&(h=s+a.length>e.length?e.length-1:s+a.length);const d=e.substring(o,h);n==="content"?i.highlightHtml=d:n==="title"&&(i.highlightTitle=e)}}return i},p=t=>({title:t.title,description:t.description,permalink:t.permalink?t.permalink:t._path,date:t.date?t.date:new Date,createTime:t.date?t.date:new Date,id:t._id,articleid:t._id}),g=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),f=(t,i)=>t?new Date(t).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",y=t=>{let i=t.split(`
`),n=0,e={},r=["title","author","categories","category","tags","tag","date","permalink","desc"],c=0;for(var a=0;a<i.length&&!(i[a].trim()==="---"&&(n++,c++,n===2));a++)if(i[a].includes(":")){let s=i[a].split(/:(.*)/s),l=s[0].trim(),o=s[1].trim();l==="author"?e[l]=u(o):r.indexOf(l)>=0&&(e[l]=o)}if(!e.desc){let s="",l=0;for(var a=c;a<i.length;a++)if(l>0&&(s+=i[a]),i[a].trim().startsWith("#")){if(l>0)break;l=a+1}e.desc=s}return e},u=t=>{let i=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,n={};for(let e of i.split(","))if(e.includes(":")){let r=e.split(":");n[r[0].trim()]=r[1].trim()}return n};export{f as a,m as b,p as c,g as m,y as s};
