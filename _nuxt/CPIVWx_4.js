import{_ as T}from"./DHkkyGU5.js";import{_ as b}from"./Dg_F7Z85.js";import{_ as C}from"./DSjIwDM1.js";import{_ as N}from"./CNljlJyC.js";import{b as S,c as B,d as E}from"./CvIXsaFB.js";import{h as $,q as i,D as q,s as D,o as f,c as v,b as _,a as d,K as F,a2 as P,a3 as V,w as U,d as G,B as I,z as y,F as L,A as H,G as O}from"./CN9afWd_.js";import{M as k}from"./DshPJGOp.js";import{s as R}from"./DaQUaYyD.js";import"./CyaWhohe.js";import"./Cl7s5NGN.js";import"./GnEriZLr.js";import"./CAZilBRX.js";import"./DhMMPS2l.js";const j={class:"container"},z=["innerHTML"],A={class:"articles"},re=$({__name:"index",setup(J){const m=i(""),c=S(q().public.mindpress),e=i(""),o=i([]),s=i(!1),p=i(null);console.log("search....."),console.log("mode===>"+c.mode);const w=i(1);D(()=>{p&&p.value&&p.value.focus()});function x(u){const l=c.searchUrl+"?q="+u;if(console.log(l),c.mode===k.SSG)o.value=[],e.value="no markdown file find."+c.mode,s.value=!1;else if(c.mode===k.FCM)try{const t="/api/md/search";let a=performance.now();s.value=!0,e.value="",o.value=[],R({pageNo:w.value,url:t,q:u,highlight:!0}).then(n=>{if(n){o.value=n.map(M=>B(M));let r=(performance.now()-a).toFixed(2);e.value=`Mindpress found <span style="color:red">${n.length}</span> files (key:<span style="color:red">${u}</span>). Time cost: ${r} milliseconds.`}else e.value='find <span style="color:red">0</span> markdown files.';s.value=!1},n=>{s.value=!1})}catch(t){console.warn(t)}else O(l,{key:l+u},"$9f7SGOEuTp").then(t=>{const a=t.data.value;console.log(a),a&&a.totalElements>0?(o.value=a.content.map(n=>E(n)),e.value='find <span style="color:red">'+a.totalElements+"</span> markdown files.",console.log(o.value),console.log(e.value)):(o.value=[],e.value="no markdown file find.")},t=>{e.value="http request error. "+t,o.value=[]})}function h(){if(console.log("submit... q="+m.value),!m.value){o.value=[],e.value="";return}x(m.value)}return(u,l)=>{const t=T,a=b,n=C,g=N;return f(),v("div",null,[_(t),d("main",j,[d("form",{onSubmit:F(h,["prevent"]),style:{display:"flex","justify-content":"center","margin-bottom":"0rem"}},[P(d("input",{ref_key:"searchInput",ref:p,type:"text",style:{height:"2.5rem"},"onUpdate:modelValue":l[0]||(l[0]=r=>m.value=r),placeholder:"Please input your keyword."},null,512),[[V,m.value]]),_(a,{onClick:h,icon:"i-heroicons-magnifying-glass-16-solid",style:{width:"10rem","margin-left":"10px"},block:""},{default:U(()=>[G("Search")]),_:1})],32),d("label",{style:{"margin-bottom":"1rem"},innerHTML:e.value},null,8,z),s.value?(f(),I(n,{key:0,animation:"carousel"})):y("",!0),d("div",A,[s.value?y("",!0):(f(!0),v(L,{key:0},H(o.value,r=>(f(),v("div",{class:"article",key:r.id},[_(g,{item:r},null,8,["item"])]))),128))])])])}}});export{re as default};
