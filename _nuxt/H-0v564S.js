import{h as _}from"./DvDH6DOc.js";import{A as x,s as L,P as C,Q as u}from"./Bib0l-ra.js";import{u as F}from"./DGb2g9d0.js";const H=t=>{const i={articleid:t.articleid,authors:[{name:t.createBy,link:t.createBy}],category:t.category,createBy:t.createBy,createTime:t.createTime,editlink:"/edit/"+t.articleid,date:t.createTime,description:t.desc,id:t.id,isPublic:t.isPublic===1,likeCount:t.likeCountVo||0,permalink:"/article/"+t.articleid,reviewInfo:t.reviewInfo,status:t.status,space:t.space,tags:t.tags?t.tags.split(","):[],title:t.title,updateTime:t.updateTime,_type:"markdown"};if(t.highlight)for(let s in t.highlight){let e="";t.highlight.hasOwnProperty(s)&&(e+=t.highlight[s].join(" "));const o='<span style="color:red">',n=e.indexOf(o),a="</span>",l=e.lastIndexOf(a),r=100+o.length;if(n>=0){const h=n-10>0?n-10:0;let f=n+r>e.length?e.length-1:n+r;l>0&&(f=l+a.length>e.length?e.length-1:l+a.length);const p=e.substring(h,f);s==="content"?i.highlightHtml=p:s==="title"&&(i.highlightTitle=e)}}return i},V=t=>({title:t.title,description:t.description,permalink:t.permalink?t.permalink:t._path,date:t.date?t.date:new Date,createTime:t.date?t.date:new Date,id:t._id,articleid:t._id}),q=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),R=(t,i)=>t?new Date(t).toLocaleDateString(i||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",W=t=>{let i=t.split(`
`),s=0,e={},o=["title","author","categories","category","tags","tag","date","permalink","desc"],n=0;for(var a=0;a<i.length&&!(i[a].trim()==="---"&&(s++,n++,s===2));a++)if(i[a].includes(":")){let l=i[a].split(/:(.*)/s),r=l[0].trim(),h=l[1].trim();r==="author"?e[r]=j(h):o.indexOf(r)>=0&&(e[r]=h)}if(!e.desc){let l="",r=0;for(var a=n;a<i.length;a++)if(r>0&&(l+=i[a]),i[a].trim().startsWith("#")){if(r>0)break;r=a+1}e.desc=l}return e},j=t=>{let i=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,s={};for(let e of i.split(","))if(e.includes(":")){let o=e.split(":");s[o[0].trim()]=o[1].trim()}return s};function K(t,i,s){const[e={},o]=typeof i=="string"?[{},i]:[i,s],n=x(()=>u(t)),a=e.key||_([o,typeof n.value=="string"?n.value:"",...A(e)]);if(!a||typeof a!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+a);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const l=a===o?"$f"+a:a;if(!e.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:r,lazy:h,default:f,transform:p,pick:b,watch:m,immediate:k,getCachedData:w,deep:T,dedupe:U,...D}=e,d=L({...C,...D,cache:typeof e.cache=="boolean"?void 0:e.cache}),O={server:r,lazy:h,default:f,transform:p,pick:b,immediate:k,getCachedData:w,deep:T,dedupe:U,watch:m===!1?[]:[d,n,...m||[]]};let c;return F(l,()=>{var y;(y=c==null?void 0:c.abort)==null||y.call(c),c=typeof AbortController<"u"?new AbortController:{};const g=u(e.timeout);return g&&setTimeout(()=>c.abort(),g),(e.$fetch||globalThis.$fetch)(n.value,{signal:c.signal,...d})},O)}function A(t){var s;const i=[((s=u(t.method))==null?void 0:s.toUpperCase())||"GET",u(t.baseURL)];for(const e of[t.params||t.query]){const o=u(e);if(!o)continue;const n={};for(const[a,l]of Object.entries(o))n[u(a)]=u(l);i.push(n)}return i}export{R as a,H as b,V as c,q as m,W as s,K as u};
