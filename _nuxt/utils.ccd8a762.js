import{h as T}from"./index.9bb628c0.js";import{u as D}from"./asyncData.10a32275.js";import{u as m,j as U,W as _}from"./entry.93c0adaa.js";function L(t,e,c){const[a={},o]=typeof e=="string"?[{},e]:[e,c],r=a.key||T([o,m(a.baseURL),typeof t=="string"?t:"",m(a.params)]);if(!r||typeof r!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+r);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const i=r===o?"$f"+r:r,s=U(()=>{let u=t;return typeof u=="function"&&(u=u()),m(u)}),{server:n,lazy:p,default:d,transform:h,pick:y,watch:b,immediate:k,...g}=a,f=_({...g,cache:typeof a.cache=="boolean"?void 0:a.cache}),w={server:n,lazy:p,default:d,transform:h,pick:y,immediate:k,watch:[f,s,...b||[]]};let l;return D(i,()=>{var u;return(u=l==null?void 0:l.abort)==null||u.call(l),l=typeof AbortController<"u"?new AbortController:{},$fetch(s.value,{signal:l.signal,...f})},w)}const P=t=>({title:t.title,description:t.desc,authors:[{name:t.createBy,link:t.createBy}],date:t.createTime,updateTime:t.updateTime,createTime:t.createTime,space:t.space,isPublic:t.isPublic===1,permalink:"/article/"+t.articleid,articleid:t.articleid,id:t.id,editlink:"/edit/"+t.articleid,tag:t.tags?t.tags.split(","):[],_type:"markdown"}),j=t=>({title:t.title,description:t.description,permalink:t.permalink?t.permalink:t._path,date:t.date?t.date:new Date,createTime:t.date?t.date:new Date,id:t._id,articleid:t._id}),x=t=>({mode:t.mode,contentUrl:t.baseUrl+"content",metaUrl:t.baseUrl+"meta",spaceUrl:t.baseUrl+"space",searchUrl:t.baseUrl+"search"}),B=(t,e)=>t?new Date(t).toLocaleDateString(e||"en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",E=t=>{let e=t.split(`
`),c=0,a={},o=["title","author","categories","category","tags","tag","date","permalink","desc"],r=0;for(var i=0;i<e.length&&!(e[i].trim()==="---"&&(c++,r++,c===2));i++)if(e[i].includes(":")){let s=e[i].split(/:(.*)/s),n=s[0].trim(),p=s[1].trim();n==="author"?a[n]=O(p):o.indexOf(n)>=0&&(a[n]=p)}if(!a.desc){let s="",n=0;for(var i=r;i<e.length;i++)if(n>0&&(s+=e[i]),e[i].trim().startsWith("#")){if(n>0)break;n=i+1}a.desc=s}return a},O=t=>{let e=t.trim().startsWith("{")&&t.trim().endsWith("}")?t.substring(t.indexOf("{")+1,t.indexOf("}")):t,c={};for(let a of e.split(","))if(a.includes(":")){let o=a.split(":");c[o[0].trim()]=o[1].trim()}return c};export{B as a,P as b,j as c,x as m,E as s,L as u};
