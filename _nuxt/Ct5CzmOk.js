import{_ as N}from"./Ckv7nvto.js";import{_ as S}from"./5wwM4Xyo.js";import{_ as B}from"./G-2YD04M.js";import{_ as F}from"./DvNFfAoC.js";import{b as q,c as D,d as E}from"./CvIXsaFB.js";import{h as P,q as u,D as V,o as p,c as v,b as _,a as d,I as U,W as $,X as I,f as L,w as G,d as H,B as O,z as y,F as R,A as j}from"./BLwqSLKO.js";import{M as g}from"./DshPJGOp.js";import{s as T}from"./_Yl8Yui_.js";import{b as z}from"./B1bOZ3Ky.js";import"./CBuXNKW1.js";import"./DvDH6DOc.js";import"./Be-mHjxC.js";import"./CiT0qAeO.js";import"./CAZilBRX.js";import"./BbKdSwWs.js";const A={class:"container"},W=["innerHTML"],X={class:"articles"},ue=P({__name:"index",setup(J){const c=u(""),m=q(V().public.minpress),n=u(""),r=u([]),i=u(!1);console.log("search....."),console.log("mode===>"+m.mode);const h=u(1);function k(){let a=null;return function(e,o){clearTimeout(a),a=setTimeout(()=>{e()},o||500)}}const x=k();function b(a){const e=a;if(console.log("----onchanged:"+e),!a||a.length==0||m.mode!==g.FCM)return;const o="/api/md/search",s=performance.now();T({pageNo:h.value,url:o,q:e,autoSuggest:!0}).then(t=>{if(t){console.log(t);let l=(performance.now()-s).toFixed(2);n.value='find <span style="color:red">'+t.length+`</span> markdown files. Time cost: ${l} milliseconds.`}else n.value='find <span style="color:red">0</span> markdown files.';i.value=!1},t=>{i.value=!1})}function C(a){const e=m.searchUrl+"?q="+a;if(console.log(e),m.mode===g.SSG)r.value=[],n.value="no markdown file find."+m.mode,i.value=!1;else if(m.mode===g.FCM)try{const o="/api/md/search";let s=performance.now();i.value=!0,T({pageNo:h.value,url:o,q:a}).then(t=>{if(t){r.value=t.map(M=>D(M));let l=(performance.now()-s).toFixed(2);n.value='find <span style="color:red">'+t.length+`</span> markdown files. Time cost: ${l} milliseconds.`}else n.value='find <span style="color:red">0</span> markdown files.';i.value=!1},t=>{i.value=!1})}catch(o){console.warn(o)}else z(e,{key:e+a},"$9f7SGOEuTp").then(o=>{const s=o.data.value;console.log(s),s&&s.totalElements>0?(r.value=s.content.map(t=>E(t)),n.value='find <span style="color:red">'+s.totalElements+"</span> markdown files.",console.log(r.value),console.log(n.value)):(r.value=[],n.value="no markdown file find.")},o=>{n.value="http request error. "+o,r.value=[]})}function w(){if(console.log("submit... q="+c.value),!c.value){r.value=[],n.value="";return}C(c.value)}return(a,e)=>{const o=N,s=S,t=B,f=F;return p(),v("div",null,[_(o),d("main",A,[d("form",{onSubmit:U(w,["prevent"]),style:{display:"flex","justify-content":"center","margin-bottom":"0rem"}},[$(d("input",{type:"text",style:{height:"2.5rem"},"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),placeholder:"Please input your keyword.",onInput:e[1]||(e[1]=l=>L(x)(()=>b(l.target.value),500))},null,544),[[I,c.value]]),_(s,{onclick:w,icon:"i-heroicons-magnifying-glass-16-solid",style:{width:"10rem","margin-left":"10px"},block:""},{default:G(()=>[H("Search")]),_:1})],32),d("label",{style:{"margin-bottom":"1rem"},innerHTML:n.value},null,8,W),i.value?(p(),O(t,{key:0,animation:"carousel"})):y("",!0),d("div",X,[i.value?y("",!0):(p(!0),v(R,{key:0},j(r.value,l=>(p(),v("div",{class:"article",key:l.id},[_(f,{item:l},null,8,["item"])]))),128))])])])}}});export{ue as default};
