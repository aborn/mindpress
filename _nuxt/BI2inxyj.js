import{_ as V}from"./DK7cUY1M.js";import{_ as q}from"./DpxBtH06.js";import{b as R,i as M,c as _,d as w}from"./DIZLPcGa.js";import{r as f,g as D,h as c,c as i,b as v,a as g,F as x,i as B,o as u}from"./CzIQfgiN.js";import{u as C}from"./BBOJkh1t.js";import{M as L}from"./g2xh0qhU.js";import{q as k}from"./B78Epr6R.js";import{u as h}from"./DlAwg47y.js";import{u as E}from"./DwALTAkc.js";import{q as N}from"./DtIcKM_R.js";import"./Be_2J8GA.js";import"./DvDH6DOc.js";import"./Doq5ztmc.js";const P={class:"container"},S={class:"articles"},H={__name:"index",async setup(U){let o,t;const s=f([]),l=R(D().public.minpress),m=C(),y=m.protocol+"//"+m.host;console.log(l),console.log(y);let d=M(m.hostname);if(console.log("isDevMode:"+d),l.mode===L.static){const n=([o,t]=c(()=>k()),o=await o,t(),o);console.log("mode===>"+n);try{const{data:e}=([o,t]=c(()=>h("/api/md/query","$PslAyef5YX")),o=await o,t(),o),a=e.value.map(r=>_(r,d));s.value=a,console.log("***************"),console.log(a)}catch(e){console.warn(e)}if(s.value.length<=0){console.log("static mode");const{data:e}=([o,t]=c(()=>E("home",()=>N().sort({_id:1}).find())),o=await o,t(),o);console.log("--------dataVVVVVVV-----"),console.log(e.value);const a=e.value.map(r=>_(r));s.value=a}}else{console.log("server mode");const{data:n}=([o,t]=c(()=>h(l.metaUrl,"$6PO73qLRkI")),o=await o,t(),o);if(n.value.totalElements>0){const e=f([]);e.value=n.value.content.map(a=>w(a)),s.value=e.value}}return(n,e)=>{const a=V,r=q;return u(),i("div",null,[v(a),g("main",P,[g("div",S,[(u(!0),i(x,null,B(s.value,p=>(u(),i("div",{class:"article",key:p.id},[v(r,{item:p},null,8,["item"])]))),128))])])])}}};export{H as default};
