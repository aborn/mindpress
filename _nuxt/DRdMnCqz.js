import{_ as b}from"./Cmua0WuA.js";import{_ as T}from"./Ck7i1eN2.js";import{_ as M}from"./CIkexrOH.js";import{_ as C}from"./PX86-vu3.js";import{b as N,c as S,d as B}from"./CvIXsaFB.js";import{h as E,q as u,D as q,o as d,c as f,b as _,a as p,I as D,W as F,X as P,w as V,d as $,B as U,z as g,F as L,A as G}from"./B2RSLQta.js";import{M as y}from"./DshPJGOp.js";import{s as H}from"./C8fvMpmz.js";import{b as I}from"./CaOamkp2.js";import"./BpdTMbqv.js";import"./DvDH6DOc.js";import"./D6GGAmuu.js";import"./REgrTOch.js";import"./CAZilBRX.js";import"./BwaVXHLP.js";const O={class:"container"},R=["innerHTML"],j={class:"articles"},re=E({__name:"index",setup(z){const i=u(""),m=N(q().public.minpress),e=u(""),a=u([]),s=u(!1);console.log("search....."),console.log("mode===>"+m.mode);const k=u(1);function w(c){const l=m.searchUrl+"?q="+c;if(console.log(l),m.mode===y.SSG)a.value=[],e.value="no markdown file find."+m.mode,s.value=!1;else if(m.mode===y.FCM)try{const o="/api/md/search";let t=performance.now();s.value=!0,e.value="",H({pageNo:k.value,url:o,q:c,highlight:!0}).then(n=>{if(n){a.value=n.map(x=>S(x));let r=(performance.now()-t).toFixed(2);e.value=`Mindpress found <span style="color:red">${n.length}</span> files (key:<span style="color:red">${c}</span>). Time cost: ${r} milliseconds.`}else e.value='find <span style="color:red">0</span> markdown files.';s.value=!1},n=>{s.value=!1})}catch(o){console.warn(o)}else I(l,{key:l+c},"$9f7SGOEuTp").then(o=>{const t=o.data.value;console.log(t),t&&t.totalElements>0?(a.value=t.content.map(n=>B(n)),e.value='find <span style="color:red">'+t.totalElements+"</span> markdown files.",console.log(a.value),console.log(e.value)):(a.value=[],e.value="no markdown file find.")},o=>{e.value="http request error. "+o,a.value=[]})}function v(){if(console.log("submit... q="+i.value),!i.value){a.value=[],e.value="";return}w(i.value)}return(c,l)=>{const o=b,t=T,n=M,h=C;return d(),f("div",null,[_(o),p("main",O,[p("form",{onSubmit:D(v,["prevent"]),style:{display:"flex","justify-content":"center","margin-bottom":"0rem"}},[F(p("input",{type:"text",style:{height:"2.5rem"},"onUpdate:modelValue":l[0]||(l[0]=r=>i.value=r),placeholder:"Please input your keyword."},null,512),[[P,i.value]]),_(t,{onClick:v,icon:"i-heroicons-magnifying-glass-16-solid",style:{width:"10rem","margin-left":"10px"},block:""},{default:V(()=>[$("Search")]),_:1})],32),p("label",{style:{"margin-bottom":"1rem"},innerHTML:e.value},null,8,R),s.value?(d(),U(n,{key:0,animation:"carousel"})):g("",!0),p("div",j,[s.value?g("",!0):(d(!0),f(L,{key:0},G(a.value,r=>(d(),f("div",{class:"article",key:r.id},[_(h,{item:r},null,8,["item"])]))),128))])])])}}});export{re as default};
