import{_ as w}from"./NavBar-f3be879d.mjs";import{_ as y,E as D,o as C,e as A,f as S,r as V,G as B,x as b,l as N,z as M,y as _,i as U,k as m,n as h,H as j,I as q,q as I,J as P}from"./entry-8598b940.mjs";import{m as x,s as T,u as O}from"./utils-96c1210d.mjs";const $={name:D,props:{placeholder:String,tag:{type:String,default:"span"}}};function J(l,s,a,e,n,i){const o=B;return C(),A(o,{placeholder:a.placeholder,"placeholder-tag":a.tag},{default:S(()=>[V(l.$slots,"default")]),_:3},8,["placeholder","placeholder-tag"])}var R=y($,[["render",J]]);const z={data:()=>({hint:"",articleid:"",title:"",mp:{}}),methods:{changeAction(l){},saveAction(l){const e=b().params.id[0]||this.articleid,n=JSON.stringify(T(l));console.log(n),n.title&&n.title!==""&&(this.title=n.title);const i=this.title;console.log("--- now save event triggled. articleid="+e+"---");const o=e+"t"+new Date;console.log(this.mp),O(this.mp.contentUrl,{key:o,method:"POST",headers:{"Content-Type":"application/json"},body:{articleid:e,content:l,title:i,extInfo:n}}).then(r=>{const t=r.data.value,c=r.error.value;console.log(t),console.log(c),this.hint=t?t.msg:c,t&&t.success&&(this.hint=t.msg+" "+new Date,t.ext&&t.ext.articleid&&(console.log(t.ext.articleid),this.articleid=t.ext.articleid))},r=>{console.log("exception..."),console.log(r)})}}},F=Object.assign(z,{async setup(l,{expose:s}){s();let a,e;const n=b(),i=n.params.id,o=i[0],r=["github"],t=x(N().public.minpress),c=t.contentUrl+"/"+o;console.log(c);const u={content:"",id:0},{data:g}=o?([a,e]=M(()=>O(c)),a=await a,e(),a):u,f=d=>d.value?{content:d.value.content,title:d.value.title,id:d.value.id,msg:"success",status:!0}:(console.log("error in http"),{content:"",id:0,msg:"error http fetch content, articleid="+o,status:!1,title:""}),p=o?f(g):u,k=_(p.content),E=_(p.title),v={route:n,articleids:i,articleid:o,toolbarsExclude:r,mp:t,url:c,defaultData:u,data:g,processData:f,pData:p,mkdContent:k,title:E,ref:_,MdEditor:P,mpConfig:x};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),G={class:"container"};function H(l,s,a,e,n,i){const o=w,r=R;return C(),U("div",null,[m(o),h("main",G,[j(h("input",{id:"title",name:"title",style:{height:"2.5rem"},placeholder:"Article title","onUpdate:modelValue":s[0]||(s[0]=t=>e.title=t),required:""},null,512),[[q,e.title]]),h("label",null,I(l.hint),1),m(r,{placeholder:"loading...",tag:"span"},{default:S(()=>[m(e.MdEditor,{modelValue:e.mkdContent,"onUpdate:modelValue":s[1]||(s[1]=t=>e.mkdContent=t),theme:l.$colorMode.value,toolbarsExclude:e.toolbarsExclude,style:{height:"480px"},onOnChange:i.changeAction,onOnSave:i.saveAction},null,8,["modelValue","theme","onOnChange","onOnSave"])]),_:1})])])}var W=y(F,[["render",H]]);export{W as default};
